{"ast":null,"code":"import _slicedToArray from\"C:/Users/Adima/OneDrive/Documents/GitHub/TVsncf/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import{calculateDelay,getFullMinutes,parseUTCDate}from'./Utils';import Origin from'./Origin';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Arrivals(){var _useParams=useParams(),codeStation=_useParams.codeStation;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),nextArrivals=_useState2[0],setNextArrivals=_useState2[1];useEffect(function(){axios.get(\"https://api.sncf.com/v1/coverage/sncf/stop_areas/\".concat(codeStation,\"/arrivals\"),{headers:{Authorization:\"\".concat(process.env.REACT_APP_API_KEY)}}).then(function(response){var arrivals=response.data.arrivals.map(function(arrival){return{id:arrival.links[1].id,operator:'',transportationMode:arrival.display_informations.network,trainNumber:arrival.display_informations.headsign,baseArrivalTime:parseUTCDate(arrival.stop_date_time.base_arrival_date_time),realArrivalTime:parseUTCDate(arrival.stop_date_time.arrival_date_time)};});setNextArrivals(arrivals);});},[codeStation]);var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isTimeDisplayed=_useState4[0],setIsTimeDisplayed=_useState4[1];useEffect(function(){var interval=setInterval(function(){setIsTimeDisplayed(function(prevIsTimeDisplayed){return!prevIsTimeDisplayed;});},1500);return function(){clearInterval(interval);};},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"arrivals\",children:nextArrivals.map(function(arrival,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"arrival \".concat(index%2?'':'arrival--light'),children:[/*#__PURE__*/_jsx(\"p\",{className:\"arrival__operator\",children:arrival.operator}),/*#__PURE__*/_jsx(\"p\",{className:\"arrival__train-type\",children:arrival.transportationMode}),/*#__PURE__*/_jsx(\"p\",{className:\"arrival__train-number\",children:arrival.trainNumber}),/*#__PURE__*/_jsxs(\"p\",{className:\"arrival__time \".concat(isTimeDisplayed?'':'arrival__time--disappear'),children:[arrival.baseArrivalTime.getHours(),\"h\",getFullMinutes(arrival.baseArrivalTime)]}),/*#__PURE__*/_jsx(\"p\",{className:\"arrival__delay \".concat(isTimeDisplayed?'arrival__delay--disappear':''),children:calculateDelay(arrival.baseArrivalTime,arrival.realArrivalTime)}),/*#__PURE__*/_jsx(Origin,{idArrival:arrival.id})]},arrival.id);})});}export default Arrivals;","map":{"version":3,"names":["axios","React","useEffect","useState","useParams","calculateDelay","getFullMinutes","parseUTCDate","Origin","jsx","_jsx","jsxs","_jsxs","Arrivals","_useParams","codeStation","_useState","_useState2","_slicedToArray","nextArrivals","setNextArrivals","get","concat","headers","Authorization","process","env","REACT_APP_API_KEY","then","response","arrivals","data","map","arrival","id","links","operator","transportationMode","display_informations","network","trainNumber","headsign","baseArrivalTime","stop_date_time","base_arrival_date_time","realArrivalTime","arrival_date_time","_useState3","_useState4","isTimeDisplayed","setIsTimeDisplayed","interval","setInterval","prevIsTimeDisplayed","clearInterval","className","children","index","getHours","idArrival"],"sources":["C:/Users/Adima/OneDrive/Documents/GitHub/TVsncf/src/components/Arrivals.jsx"],"sourcesContent":["import axios from 'axios'\nimport React, { useEffect, useState } from 'react'\nimport { useParams } from 'react-router-dom'\nimport { calculateDelay, getFullMinutes, parseUTCDate } from './Utils'\nimport Origin from './Origin'\n\nfunction Arrivals() {\n  const { codeStation } = useParams()\n\n  const [nextArrivals, setNextArrivals] = useState([])\n\n  useEffect(() => {\n    axios\n      .get(\n        `https://api.sncf.com/v1/coverage/sncf/stop_areas/${codeStation}/arrivals`,\n        {\n          headers: {\n            Authorization: `${process.env.REACT_APP_API_KEY}`,\n          },\n        },\n      )\n      .then((response) => {\n        const arrivals = response.data.arrivals.map((arrival) => ({\n          id: arrival.links[1].id,\n          operator: '',\n          transportationMode: arrival.display_informations.network,\n          trainNumber: arrival.display_informations.headsign,\n          baseArrivalTime: parseUTCDate(\n            arrival.stop_date_time.base_arrival_date_time,\n          ),\n          realArrivalTime: parseUTCDate(\n            arrival.stop_date_time.arrival_date_time,\n          ),\n        }))\n        setNextArrivals(arrivals)\n      })\n  }, [codeStation])\n\n  const [isTimeDisplayed, setIsTimeDisplayed] = useState(true)\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setIsTimeDisplayed((prevIsTimeDisplayed) => !prevIsTimeDisplayed)\n    }, 1500)\n\n    return () => {\n      clearInterval(interval)\n    }\n  }, [])\n  return (\n    <div className=\"arrivals\">\n      {nextArrivals.map((arrival, index) => (\n        <div\n          key={arrival.id}\n          className={`arrival ${index % 2 ? '' : 'arrival--light'}`}\n        >\n          <p className=\"arrival__operator\">{arrival.operator}</p>\n          <p className=\"arrival__train-type\">{arrival.transportationMode}</p>\n          <p className=\"arrival__train-number\">{arrival.trainNumber}</p>\n          <p\n            className={`arrival__time ${\n              isTimeDisplayed ? '' : 'arrival__time--disappear'\n            }`}\n          >\n            {arrival.baseArrivalTime.getHours()}h\n            {getFullMinutes(arrival.baseArrivalTime)}\n          </p>\n          <p\n            className={`arrival__delay ${\n              isTimeDisplayed ? 'arrival__delay--disappear' : ''\n            }`}\n          >\n            {calculateDelay(arrival.baseArrivalTime, arrival.realArrivalTime)}\n          </p>\n          <Origin idArrival={arrival.id} />\n        </div>\n      ))}\n    </div>\n  )\n}\n\nexport default Arrivals\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}